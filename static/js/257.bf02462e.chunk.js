"use strict";(self.webpackChunkecomtwo=self.webpackChunkecomtwo||[]).push([[257],{76697:function(e,r,n){n.d(r,{l:function(){return o}});var t=n(1413),a=(n(72791),n(75737)),s=n.n(a),i=(n(98404),n(42985),n(80184)),o=function(e){var r=e.fields,n=e.onSubmit,a=e.phoneNumber,o=e.setPhoneNumber,l=e.register,c=e.errors,u=e.labelButton,m=e.showPhoneInput,d=e.showCheckboxInput,p=e.handleNavigate,h=e.labelNavigate,f=e.errorMessaage;return(0,i.jsxs)("form",{onSubmit:n,children:[r.map((function(e){return(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"input-label",htmlFor:e.name,children:e.label}),(0,i.jsx)("input",(0,t.Z)((0,t.Z)({className:"border-2   validation-input"},l(e.name,e.validation)),{},{"aria-invalid":c[e.name]?"true":"false"})),c[e.name]&&(0,i.jsx)("p",{className:"m-0 form-erroe-style",role:"alert",children:c[e.name].message})]},e.name)})),m&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"input-label",htmlFor:"phoneNumber",children:"Phone Number:"}),(0,i.jsx)(s(),{className:"",country:"in",name:"phoneNumber",value:a,onChange:function(e){o(e)},inputProps:{name:"phoneNumber",required:!0}})]}),d&&(0,i.jsxs)("div",{className:" d-flex justify-between form-checkbox",children:[(0,i.jsxs)("div",{className:"d-flex    form-checkbox",children:[(0,i.jsx)("input",{type:"checkbox",name:"",id:""}),(0,i.jsx)("p",{children:"Accept Terms & Conditions"})]}),(0,i.jsx)("div",{className:"login-link",children:(0,i.jsx)("p",{onClick:p,className:" cursor-pointer",children:h})})]}),(0,i.jsx)("p",{className:" text-red-500",children:f}),(0,i.jsx)("button",{className:"validation-form-btn w-full",type:"submit",children:u})]})}},93257:function(e,r,n){n.r(r);var t=n(74165),a=n(15861),s=n(29439),i=n(72791),o=n(54390),l=(n(50363),n(76697)),c=n(61134),u=n(57689),m=n(80184);r.default=function(){var e=(0,u.s0)(),r=(0,i.useState)(""),n=(0,s.Z)(r,2),d=n[0],p=n[1],h=(0,c.cI)(),f=h.register,v=h.handleSubmit,x=h.formState.errors,b=function(){var r=(0,a.Z)((0,t.Z)().mark((function r(n){var a,s,i,l;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=n.email,s=n.password,a.trim()&&s.trim()){r.next=4;break}return p("Please enter both email and password."),r.abrupt("return");case 4:return i={email:a,password:s},r.prev=5,r.next=8,(0,o.pH)(i);case 8:l=r.sent,console.log("user login successful:",l),p(""),sessionStorage.setItem("accessToken",l.token),sessionStorage.setItem("email",a),sessionStorage.setItem("specificUser",JSON.stringify(l.user)),e("/"),window.location.reload(),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(5),console.log("error while logging in:",r.t0),p("Invalid email or password.");case 22:case"end":return r.stop()}}),r,null,[[5,18]])})));return function(e){return r.apply(this,arguments)}}();return(0,m.jsx)("div",{className:"mt-10",children:(0,m.jsxs)("div",{className:"col-lg-4 col-12 m-auto registration-from-style",children:[(0,m.jsx)("h1",{children:"Login Here"}),(0,m.jsx)(l.l,{fields:[{name:"email",label:"Email:",validation:{required:"Email is required",pattern:{value:/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/i,message:"Invalid email format"},maxLength:{value:100,message:"Email should not exceed 100 characters"}}},{name:"password",label:"Password:",validation:{required:"Password is required"}}],onSubmit:v(b),register:f,errors:x,labelButton:"Login",showCheckboxInput:!0,labelNavigate:"Register Here",handleNavigate:function(){return e("/registration")}}),d&&(0,m.jsx)("p",{className:" text-red-500  m-0 ",role:"alert",children:d})]})})}},54390:function(e,r,n){n.d(r,{a$:function(){return i},pH:function(){return o}});var t=n(74165),a=n(15861),s=n(31243),i=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.post("http://localhost:3002/api/register",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0.response||409!==e.t0.response.status){e.next=11;break}throw new Error("User with the same email or phone number already exists");case 11:throw new Error("Something went wrong during registration");case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.post("http://localhost:3002/api/login",r);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response.data;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}()},50363:function(){}}]);
//# sourceMappingURL=257.bf02462e.chunk.js.map